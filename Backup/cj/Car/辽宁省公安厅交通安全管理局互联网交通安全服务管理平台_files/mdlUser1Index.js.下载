//绑定license

define("js/funInsertOrder",["jquery"],function(d){var c,b;return{config:function(d,a){c=d;b=a},insert:function(e){var a=null,k=e.attr("id");d("#"+k).remove();for(var h=!1,g=b.length-1;0<=g;g--)if(h){if(a=d("#"+b[g]),0<a.length)break}else b[g]==k&&(h=!0);a&&0<a.length?e.insertAfter(a):-1==g&&0<c.children().length?e.insertBefore(c.children().eq(0)):c.append(e)}}});
define("js/dpApprize",["jquery","js/urls"],function(d,c){return{getLastApprize:function(b,e,a){b=d.extend({page:1,size:10,status:0},b);b=c.ajaxData({url:c.apibase+c.lastApprize,data:b},function(a){if(a.data&&0<a.data.length)for(var c=a.data,d=c.length-1;0<=d;d--)c[d].cjsj=c[d].cjsj.substr(0,10);e(a)},a);d.ajax(b)},getVehicleApprize:function(b,e,a){b=d.extend({page:0,size:10,status:0},b);d.ajax(c.ajaxData({url:c.apibase+c.vehicleApprize,data:b},e,a));b=d.extend({page:0,size:10,status:0},b);d.ajax(c.ajaxData({url:c.apibase+
c.vehicleApprize,data:b},e,a));b=d.extend({page:0,size:10,status:0},b);d.ajax(c.ajaxData({url:c.apibase+c.vehicleApprize,data:b},e,a))},getLicenseApprize:function(b,e,a){b=d.extend({page:0,size:10,status:0},b);d.ajax(c.ajaxData({url:c.apibase+c.licenseApprize,data:b},e,a))},apprizeList:function(b,e,a){b=d.extend({size:15,page:1,keyword:""},b);b=c.ajaxData({url:c.apibase+c.apprize,data:b},e,a);d.ajax(b)},markApprizeAsRead:function(b,e,a){d.ajax(c.ajaxData({url:c.apibase+c.apprizeMakrAsRead+"/"+b.xh},
e,a))},companyGetType2:function(b,e,a){d.ajax(c.ajaxData({url:c.apibase+c.companyGetType2,data:b},e,a))},companyInfoSearch:function(b,e,a){b=d.extend({page:1,size:10},b);d.ajax(c.ajaxData({url:c.apibase+c.companyInfoSearch,data:b},function(a){if(e){for(var c=a.data.content.length,d;-1<--c;)d=a.data.content[c],d.tbsj=String(d.tbsj).replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3"),d.cjsj=String(d.cjsj).replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3");e(a)}},a))},companyVioquerySearch:function(b,e,a){d.ajax(c.ajaxData({url:c.apibase+
c.companyVioquerySearch,data:b},e,a))},companySuriquerySearch:function(b,e,a){d.ajax(c.ajaxData({url:c.apibase+c.companySuriquerySearch,data:b},e,a))},_fakeItem:0}});define("js/dpBusinessProgress",["jquery","js/urls"],function(d,c){return{getLastProgress:function(b,e,a){b=d.extend({page:0,size:10,status:0},b);b=c.ajaxData({url:c.apibase+c.businessProgress,data:b},e,a);d.ajax(b)},_fakeItem:0}});
define("js/dpVehicle",["jquery","js/urls"],function(d,c){var b=["\u8f6c\u51fa","\u8fdd\u6cd5\u672a\u5904\u7406","\u6d77\u5173\u76d1\u7ba1","\u4e8b\u6545\u672a\u5904\u7406","\u5acc\u7591\u8f66"],e="\u88ab\u76d7\u62a2 \u505c\u9a76 \u6ce8\u9500 \u67e5\u5c01 \u6682\u6263 \u5f3a\u5236\u6ce8\u9500 \u4e8b\u6545\u9003\u9038 \u9501\u5b9a".split(" ");return{getList:function(a,b,e){a=d.extend({page:0,size:10,status:"null"},a);a=c.ajaxData({url:c.apibase+c.myVechicles,data:a},function(a){a.data.vehs=a.data.content;
b(a)},e);d.ajax(a)},getAllBindVehList:function(a,b,e){a=d.extend({page:0,size:10,status:"null"},a);a=c.ajaxData({url:c.apibase+c.allVehicle,data:a},function(a){a.data.vehs=a.data.content;b(a)},e);d.ajax(a)},getLinkList:function(a,b,e){a=d.extend({page:0,size:10,status:"null"},a);a=c.ajaxData({url:c.apibase+c.myLinkVechicles,data:a},function(a){a.data.vehs=a.data.content;b(a)},e);d.ajax(a)},getOtherList:function(a,b,e){a=d.extend({page:0,size:10,status:"null"},a);a=c.ajaxData({url:c.apibase+c.otherVechicles,
data:a},function(a){a.data.vehs=a.data.content;b(a)},e);d.ajax(a)},getVehOption:function(a,b,e){a=c.ajaxData({url:c.apibase+c.vehicleOptions,data:a},function(a){if(b){for(var c=a.data.length,d,e=0;e<c;e++)d=a.data[e],d.text=d.value,d.value=d.code;b(a)}},e);d.ajax(a)},getAllVehOption:function(a,b,e){a=c.ajaxData({url:c.apibase+c.allVehicleOptions,data:a},function(a){if(b){for(var c=a.data.length,d,e=0;e<c;e++)d=a.data[e],d.text=d.value,d.value=d.code;b(a)}},e);d.ajax(a)},getModifyvehOption:function(a,
b,e){a=c.ajaxData({url:c.apibase+c.modifyvehOptions,data:a},function(a){if(b){for(var c=a.data.length,d,e=0;e<c;e++)d=a.data[e],d.text=d.value,d.value=d.code;b(a)}},e);d.ajax(a)},getVehDetail:function(a,b,e){a=c.ajaxData({url:c.apibase+c.vehicleDetail,data:a},b,e);d.ajax(a)},getVehAndVio:function(a,b,e){a=d.extend({vehSize:10,vioSize:10},a);a=c.ajaxData({url:c.apibase+c.vehicleAndVio,data:a},function(a){a.data.vehs=a.data.vehs;a.data.vios=a.data.vios;b(a)},e);d.ajax(a)},getVehSurveils:function(a,
b,e){a=d.extend({vioSize:5},a);a=c.ajaxData({url:c.apibase+c.vehicleSurveils,data:a},function(a){var c=a.data;a.data={};a.data.vios=c;b(a)},e);d.ajax(a)},getAllVehSurveils:function(a,b,e){a=d.extend({vioSize:5},a);a=c.ajaxData({url:c.apibase+c.allVehicleSurveils,data:a},function(a){var c=a.data;a.data={};a.data.vios=c;b(a)},e);d.ajax(a)},getVehicleNotice:function(a,b,e){a=d.extend({page:0,size:10,status:"null",keyword:""},a);a=c.ajaxData({url:c.apibase+c.vehicelApprize,data:a},b,e);d.ajax(a)},bindVehilce:function(a,
b,e){a=c.ajaxData({url:c.apibase+c.userBindVeh,data:a},b,e);d.ajax(a)},unbindVehilce:function(a,b,e){a=c.ajaxData({url:c.apibase+c.userUnbindVeh,data:a},b,e);d.ajax(a)},linkVehilce:function(a,b,e){a=c.ajaxData({url:c.apibase+c.userlinkVeh,data:a},b,e);d.ajax(a)},unlinkVehilce:function(a,b,e){a=c.ajaxData({url:c.apibase+c.userUnlinkVeh,data:a},b,e);d.ajax(a)},checkVehicle:function(a,b,e){a=c.ajaxData({url:c.apibase+c.usercheckVehicle,data:a},b,e);d.ajax(a)},bindOtherVehilce:function(a,b,e){a=c.ajaxData({url:c.apibase+
c.userOtherBindVeh,data:a},b,e);d.ajax(a)},getVehStatusStyle:function(a){if("\u6b63\u5e38"!=a){if(0<=d.inArray(a,b))return"badge-warning";if(0<=d.inArray(a,e))return"badge-important"}return"badge-success"},getGlxzqhOption:function(a,b,e){a=c.ajaxData({url:c.apibase+c.glxzqhOptions,data:a},function(a){if(b&&a.data){for(var c=a.data.length,d,e=0;e<c;e++)d=a.data[e],d.text=d.dmsm1,d.value=d.dmz;b(a)}},e);d.ajax(a)},_fakeItem:0}});
define("js/dpLicense",["jquery","js/urls"],function(d,c){return{getDrvAndVio:function(b,e,a){b=d.extend({drvSize:10,vioSize:5,forcSize:5},b);b=c.ajaxData({url:c.apibase+c.licenseAndVio,data:b},e,a);d.ajax(b)},getList:function(b,e,a){b=d.extend({page:0,size:10,status:"null"},b);b=c.ajaxData({url:c.apibase+c.myLicense,data:b},e,a);d.ajax(b)},getLinkList:function(b,e,a){b=d.extend({page:0,size:10,status:"null"},b);b=c.ajaxData({url:c.apibase+c.myLinkLicenses,data:b},function(a){a.data.vehs=a.data.content;
e(a)},a);d.ajax(b)},getLicenseNotice:function(b,e,a){b=d.extend({page:0,size:10,status:"null",keyword:""},b);b=c.ajaxData({url:c.apibase+c.driverAlert,data:b},e,a);d.ajax(b)},getSmscodeOnBindDrv:function(b,e,a){b=c.ajaxData({url:c.apibase+c.smscodeOnBindDrv,data:b},e,a);d.ajax(b)},bindLicense:function(b,e,a){b=c.ajaxData({url:c.apibase+c.userBindDrv,data:b},e,a);d.ajax(b)},unbindLicense:function(b,e,a){b=c.ajaxData({url:c.apibase+c.userUnbindDrv,data:b},e,a);d.ajax(b)},linkLicense:function(b,e,a){b=
c.ajaxData({url:c.apibase+c.userlinkDrv,data:b},e,a);d.ajax(b)},unlinkLicense:function(b,e,a){b=c.ajaxData({url:c.apibase+c.userUnlinkDrv,data:b},e,a);d.ajax(b)},getYzm:function(b,e,a){b=c.ajaxData({url:c.apibase+c.userBindDrvYzm+b},e,a);d.ajax(b)},getLicenseDetail:function(b,e,a){b=c.ajaxData({url:c.apibase+c.licenseDetail,data:b},e,a);d.ajax(b)},_fakeItem:0}});
define("js/funMsgUtils",["jquery","js/urls"],function(d,c){var b={render:function(){},showSuccessMsg:function(c,a){a&&0<a.length||(a="\u64cd\u4f5c\u6210\u529f",c&&c.message&&(a=c.message));b.showMsg(a)},showErrorMsg:function(c,a){a&&0<a.length||(a=b.defaultMsg(),c&&c.message&&(a=c.message));b.showMsg(a)},showRefreshMsg:function(){b.showMsg(b.refreshMsg())},showMsg:function(c){alert(c)},getMsg:function(b,a){var d=c.getMsg(b);return d?d:a?a:null},defaultMsg:function(){return"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5"},
refreshMsg:function(){return"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u9875\u9762"}};return b});define("js/dpStuInfo",["jquery","js/urls"],function(d,c){return{getStudentInfo:function(b,e,a){d.ajax(c.ajaxData({url:c.apibase+c.getStudentInfo,data:b},e,a))},checkStu:function(b,e,a){d.ajax(c.ajaxData({url:c.apibase+c.checkStu,data:b},e,a))},_fakeItem:0}});
define("user/mdlUser1Index","jquery js/tpls js/urls js/funInsertOrder js/dpApprize js/dpBusinessProgress js/dpVehicle js/dpLicense js/funMsgUtils js/dpStuInfo".split(" "),function(d,c,b,e,a,k,h,g,f,s){var i,l=5,m=0,n=null,m=0,o=function(a){a&&(n=a);1>l?n.text("\u6211\u77e5\u9053\u4e86").removeAttr("disabled"):(n.text("\uff08"+l+"\uff09\u6211\u77e5\u9053\u4e86"),l--,m=setTimeout(o,1E3))},p=function(){e.insert(d.tmpl(c.loading,{id:"lastInformAndTips"}));a.getLastApprize({page:1,size:4,status:0},function(b){e.insert(d.tmpl(c.usrLastInformAndTips,
{standalone:!1,list:b.data.content,bszn:"/views/help-guide.html?fzjg="+i.fzjg+"&ywlx="}));d("#lastInformAndTips .closea").click(function(){var c=d(this);a.markApprizeAsRead({xh:c.attr("data")},function(){p()},function(a){f.showErrorMsg(a)})})},function(a){a?e.insert(d.tmpl(c.usrLastInformAndTips,{list:[],msg:f.getMsg(a)})):e.insert(d.tmpl(c.usrLastInformAndTips,{list:[],msg:f.defaultMsg()}))})},q=function(a){d("#myVehicle #wcldzjk").empty().append(d.tmpl(c.usrVehicleSurveil,{list:a.vios}));d("#myVehicleTab a").click(function(){var a=
d(this),b=a.data("api"),e=a.attr("href");0<e.indexOf("#")&&(e=e.substr(e.indexOf("#"),e.length));if(b&&0<b.length){var t="usr"+b.substr(0,1).toUpperCase()+b.substr(1),b="get"+b.substr(0,1).toUpperCase()+b.substr(1);h[b]({size:5,status:0},function(b){d("#myVehicle "+e).empty().append(d.tmpl(c[t],{list:b.data.content,bszn:"/views/help-guide.html?fzjg="+i.fzjg+"&ywlx="}));a.data("api","")},function(a){d("#myVehicle "+e).html(f.getMsg(a,f.defaultMsg()))})}})},r=function(a,b,e){var h=[];a&&(h=a);a=[];
b&&(a=b);e?(d("#myLicense .tab-content .active").html(e),d("#myLicense .tab-content #tabJsrforce").html(e)):(d("#myLicense .tab-content .active").empty().append(d.tmpl(c.usrLicenseVio,{list:h})),d("#myLicense .tab-content #tabJsrforce").empty().append(d.tmpl(c.usrLicenseForce,{list:a})));d("#myLicenseTab a").click(function(){var a=d(this),b=a.data("api"),e="usr"+b.substr(0,1).toUpperCase()+b.substr(1),j=a.attr("href");0<j.indexOf("#")&&(j=j.substr(j.indexOf("#"),j.length));b&&""!=b&&(b="get"+b.substr(0,
1).toUpperCase()+b.substr(1),g[b]({status:0},function(b){d("#myLicense "+j).empty().append(d.tmpl(c[e],{list:b.data.content,bszn:"/views/help-guide.html?fzjg="+i.fzjg+"&ywlx="}));a.data("api","")},function(a){d("#myLicense "+j).html(f.getMsg(a,f.defaultMsg()))}))})};return{render:function(a){i=a;a.checkLogin();d.get("/m/showSystipsInfo/1","",function(a){"200"==a.code&&(clearInterval(m),d("#forNoticeZone").html(d.tmpl(c.tempInfo,a.data)),d("#userPbulicity").modal("show"),o(d("#publicityIAmKnow")))});
b.userSideBar(1);e.config(d("#mem-content"),["usrSync","lastInformAndTips","myVehicle","myLicense","studentinfo"]);e.insert(d.tmpl(c.loading,{id:"usrSync"}));e.insert(d.tmpl(c.usrSync,{list:[],msg:f.defaultMsg()}));p();e.insert(d.tmpl(c.loading,{id:"myVehicle"}));h.getAllBindVehList({page:1,size:999},function(b){var g=[];b.data.vehs&&(g=b.data.vehs);e.insert(d.tmpl(c.usrMyVehicle,{list:g,roaming:a.roaming}));h.getAllVehSurveils({},function(a){q(a.data)},function(a){d("#myVehicle #wcldzjk").html(f.getMsg(a,
f.defaultMsg()))})},function(b){b=f.getMsg(b,f.defaultMsg());e.insert(d.tmpl(c.usrMyVehicle,{list:[],msg:b,roaming:a.roaming}));q({vios:[]});d("#myVehicle #wcldzjk").html(b)});e.insert(d.tmpl(c.loading,{id:"myLicense"}));g.getDrvAndVio({},function(b){var f=[];b.data.drvs&&(f=b.data.drvs);e.insert(d.tmpl(c.usrMyLicense,{list:f,roaming:a.roaming}));r(b.data.vios,b.data.forc)},function(b){b=f.getMsg(b,f.defaultMsg());e.insert(d.tmpl(c.usrMyLicense,{list:[],msg:b,roaming:a.roaming}));r([],[],b)});s.checkStu({},
function(a){"1"==a.data.isStu&&null!=a.data.studentInfo&&null!=a.data.stu&&e.insert(d.tmpl(c.usrStudentInfo,{stu:a.data.studentInfo.stu,pdxxlist:a.data.studentInfo.pdxxlist,ksxxlist:a.data.studentInfo.ksxxlist,pxxxlist:a.data.studentInfo.pxxxlist}))},function(){});d("#syncUserA").unbind().click(function(){confirm("\u786e\u5b9a\u5c06\u7528\u6237\u4fe1\u606f\u540c\u6b65\u81f3APP\u5417\uff1f")&&d.ajax({url:"/m/netuser/syncUser",data:{yhdh:i.yhdh,yhlx:i.yhlx,fzjg:i.fzjg},dataType:"json",success:function(a){200==
a.code?alert("\u540c\u6b65\u6210\u529f\uff01"):alert(a.message)},error:function(){alert("\u540c\u6b65\u5931\u8d25\uff01")}})})}}});
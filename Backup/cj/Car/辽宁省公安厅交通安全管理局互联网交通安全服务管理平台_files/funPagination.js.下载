define(["js/tpls","js/urls"],function(i){var f=0,j={divid:"mypagination"+ ++f,total:0,size:6,active:1,records:0,insertAfter:!1,mode:"full",linkFirst:"",linkLast:"",linkPrev:"#",linkNext:"#",linkPage:"#",textFirst:"\u9996\u9875",textLast:"\u672b\u9875",textPrev:"\u4e0a\u4e00\u9875",textNext:"\u4e0b\u4e00\u9875",keepFirst:!0,keepLast:!0,keepPrev:!0,keepNext:!0,link:"#page{id}",alwaysShow:!1,callback:null,__root:null},g={basic:{linkFirst:"",linkLast:"",linkPrev:"#",linkNext:"#",linkPage:"#"},full:{linkFirst:"#",
linkLast:"#",linkPrev:"#",linkNext:"#",linkPage:"#"},tiny:{linkFirst:"",linkLast:"",linkPrev:"#",linkNext:"#",linkPage:""}},h={generate:function(f,d){var a=$.extend({},j,f);a.active=1>a.active?1:a.active>a.total?a.total:a.active;"basic"!=a.mode&&g[a.mode]?a=$.extend(a,g[a.mode]):a.mode="basic";"string"==typeof d&&(d=$(d));if(!a.alwaysShow&&1>=a.total)return null;var b=$.extend({prev:0,next:0,first:0,last:0,linkFirst:"",linkLast:"",linkPrev:"",linkNext:"",mode:a.mode,textFirst:a.textFirst,textLast:a.textLast,
textPrev:a.textPrev,textNext:a.textNext,active:a.active,total:a.total,records:a.records,pages:[],divid:a.divid},g[a.mode]),c=pageEnd=1;a.total<a.size?(c=1,pageEnd=a.total):(c=a.active-Math.floor(a.size/2),c=1>c?1:c,c+a.size>a.total?(c=a.total-a.size+1,c=1>c?1:c,pageEnd=a.total):pageEnd=c+a.size-1);1<a.active?(a.linkFirst&&0<a.linkFirst.length&&(b.first=1,b.linkFirst=a.linkFirst.split("{id}").join(1)),a.linkPrev&&0<a.linkPrev.length&&(b.prev=a.active-1,b.linkPrev=a.linkPrev.split("{id}").join(b.prev))):
(a.keepFirst&&0<a.linkFirst.length&&(b.first=0,b.linkFirst="#"),a.keepPrev&&0<a.linkPrev.length&&(b.prev=0,b.linkPrev="#"));if("#"==a.linkPage)for(;c<=pageEnd;c++)b.pages.push({no:c,link:a.link.split("{id}").join(c)});a.active<a.total?(a.linkNext&&0<a.linkNext.length&&(b.next=a.active+1,b.linkNext=a.linkNext.split("{id}").join(b.next)),a.linkLast&&0<a.linkLast.length&&(b.last=a.total,b.linkLast=a.linkLast.split("{id}").join(a.total))):(a.keepNext&&0<a.linkNext.length&&(b.next=0,b.linkNext="#"),a.keepLast&&
0<a.linkLast.length&&(b.last=0,b.linkLast="#"));var e=$.tmpl(i.pagePagination,b);$("a",e).click(function(){var b=$(this);if(b.parent().hasClass("active")||b.parent().hasClass("disabled"))return!1;a.active=parseInt(b.data("page"));a.__root=e;h.generate(a,d);return a.callback?!!a.callback(parseInt(b.data("page")),e):!1});d&&0<d.length&&(null!==a.__root?a.__root.replaceAll(e):a.insertAfter?e.insertAfter(d):d.append(e));return e}};return h});